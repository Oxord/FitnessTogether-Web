name: Check Server Directory Structure

on:
  workflow_dispatch:

jobs:
  check:
    runs-on: ubuntu-latest
    steps:
      - name: Install sshpass
        run: sudo apt-get install -y sshpass

      - name: Check directory structure
        run: |
          sshpass -p "${{ secrets.SSH_PASSWORD }}" ssh -o StrictHostKeyChecking=no ${{ secrets.SSH_USERNAME }}@${{ secrets.SSH_HOST }} << 'EOF'
          echo "=== Домашняя директория ==="
          ls -la ~/

          echo -e "\n=== Проверка domains ==="
          if [ -d ~/domains ]; then
            ls -la ~/domains/
            if [ -d ~/domains/fitness-together.ru ]; then
              echo -e "\n=== Структура fitness-together.ru ==="
              ls -la ~/domains/fitness-together.ru/
            fi
          fi

          echo -e "\n=== Проверка www ==="
          if [ -d ~/www ]; then
            ls -la ~/www/
          fi

          echo -e "\n=== Проверка httpdocs ==="
          if [ -d ~/httpdocs ]; then
            ls -la ~/httpdocs/
          fi

          echo -e "\n=== Текущий public_html ==="
          if [ -d ~/public_html ]; then
            ls -la ~/public_html/
          fi
          EOF
